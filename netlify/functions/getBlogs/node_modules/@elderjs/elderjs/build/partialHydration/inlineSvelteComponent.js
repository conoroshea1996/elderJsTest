"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.inlineSvelteComponent = exports.inlinePreprocessedSvelteComponent = exports.escapeHtml = void 0;
const defaultHydrationOptions = {
    loading: 'lazy',
};
function escapeHtml(text) {
    return text
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#039;');
}
exports.escapeHtml = escapeHtml;
function inlinePreprocessedSvelteComponent({ name = '', props = {}, options = '', }) {
    const hydrationOptions = options.length > 0 ? options : JSON.stringify(defaultHydrationOptions);
    const replacementAttrs = {
        class: '"ejs-component"',
        'data-ejs-component': `"${name}"`,
        'data-ejs-props': `{JSON.stringify(${props})}`,
        'data-ejs-options': `{JSON.stringify(${hydrationOptions})}`,
    };
    const replacementAttrsString = Object.entries(replacementAttrs).reduce((out, [key, value]) => `${out} ${key}=${value}`, '');
    return `<div${replacementAttrsString} />`;
}
exports.inlinePreprocessedSvelteComponent = inlinePreprocessedSvelteComponent;
function inlineSvelteComponent({ name = '', props = {}, options = {}, }) {
    const hydrationOptions = Object.keys(options).length > 0 ? options : defaultHydrationOptions;
    const replacementAttrs = {
        class: '"ejs-component"',
        'data-ejs-component': `"${name}"`,
        'data-ejs-props': `"${escapeHtml(JSON.stringify(props))}"`,
        'data-ejs-options': `"${escapeHtml(JSON.stringify(hydrationOptions))}"`,
    };
    const replacementAttrsString = Object.entries(replacementAttrs).reduce((out, [key, value]) => `${out} ${key}=${value}`, '');
    return `<div${replacementAttrsString}></div>`;
}
exports.inlineSvelteComponent = inlineSvelteComponent;
